// Staff User Authentication
Table StaffUser {
  id integer [pk]
  username varchar [unique]
  email varchar [unique]
  phone_number varchar [null]
  role enum('Owner', 'Staff') [default: 'staff']
  created_by_id integer [ref: > StaffUser.id, null] // Self-referential, only Owners can create Staff
  password varchar
  is_email_verified boolean [default: false]
  is_phone_verified boolean [default: false]
  last_password_change timestamp [null]
  date_created timestamp
  Note: "Only Owners can create Staff accounts"
}

// Member Records
Table Member {
  id integer [pk]
  member_id varchar [unique] // Auto-generated format: GYM000001
  name varchar
  email varchar [null]
  phone_number varchar
  sex enum('Male', 'Female') [null]
  address text
  emergency_contact varchar
  emergency_phone varchar
  start_date date
  end_date date
  membership_fee decimal(10,2) // Fee amount at time of registration/renewal
  is_active boolean [default: true]
  created_by_id integer [ref: > StaffUser.id, null] // Staff/Owner who registered
  date_created timestamp
  Note: "Members are managed by Staff/Owners but don't have login access"
}

// Membership Configuration
Table MembershipConfig {
  id integer [pk]
  membership_fee decimal(10,2)
  last_modified timestamp
  modified_by_id integer [ref: > StaffUser.id] // Only Owner can modify
  Note: 'Single source of truth for membership fee amount'
}

// Payments
Table Payment {
  id uuid [pk]
  member_id integer [ref: > Member.id]
  amount decimal(10,2)
  payment_date timestamp
  payment_method enum('Cash', 'GCash', 'Maya', 'Bank Transfer')
  status enum('Pending', 'Completed', 'Failed', 'Refunded') [default: 'Pending']
  processed_by_id integer [ref: > StaffUser.id]
  remarks text [null]
  processed_by_admin boolean [default: false] // True if manually processed by staff/owner
}

// Payment Summary Metrics
Table PaymentSummary {
  id integer [pk]
  month varchar
  total_income decimal(10,2)
  total_transactions integer
  generated_at timestamp
}

// Relationships
Ref: Member.created_by_id > StaffUser.id
Ref: Payment.member_id > Member.id
Ref: Payment.processed_by_id > StaffUser.id
Ref: MembershipConfig.modified_by_id > StaffUser.id

// Indexes
Indexes {
  (Member.member_id) [unique]
  (StaffUser.email) [unique]
  (StaffUser.username) [unique]
}

// Notes
Note: {
  'Only Owner can create Staff accounts'
  'Only Owner can modify membership fees'
  'Staff and Owner can register/manage members'
  'Staff and Owner can process payments'
  'Members are identified by GYM ID format: GYM000001'
  'Payment summaries are generated automatically'
}
